#!/usr/bin/env python
from waflib.extras import autowaf as autowaf
import waflib.Logs as Logs

# Variables for 'waf dist'
APPNAME = 'lv2-@NAME@'
VERSION = '@MINOR@.@MICRO@'

# Mandatory variables
top = '.'
out = 'build'

def options(opt):
    autowaf.set_options(opt)

def configure(conf):
    autowaf.configure(conf)
    autowaf.display_msg(conf, "LV2 bundle directory",
                        conf.env['LV2DIR'])
    print('')

def build(bld):
    bld.install_files('${LV2DIR}/@NAME@.lv2',
                      bld.path.ant_glob('*.*'))

    bld.add_post_fun(warn_lv2config)

def warn_lv2config(ctx):
    if ctx.cmd == 'install':
        Logs.warn('''
* LV2 Extension Installed
* You need to run lv2config to update extension headers
''')
